$(function () {
    $('#cardNumber').inputmask({
        mask: '(3(4|7)99 9{6} 9{5}|3999 9{4} 9{4} 9{4}|9{4} 9{4} 9{4} 9{4})'
    }).change(function () {
        let value = $(this).val().substr(0, 2);
        $('#cvc').inputmask({
            mask: (value === "34" || value === "37") ? '9{4}' : '9{3}'
        });
    });

    $('#cardDate').inputmask({
        alias: 'datetime',
        inputFormat: 'mm/yy',
        min: '08/23',
        max: '01/50'
    });


    get(`${url2290onlineForm}/country/getAllCountryByState`, null, TOKEN_AUTH_FOR_API)
        .then(res => {
            const states = res?.[0]?.States;

            states?.forEach(el => { //   ðŸ‘ˆ  user BUSINESSES
                $("#billingState").append(`
                <option value='${el.id}' >${el.name}</option>
            `)
            });
        })
});

$("#paymentComponent").validate({
    rules: {
        billingState: {select: true}
    },
    messages: {},
    submitHandler: form => {
        $(".loader").css({display: "flex"});
        const formData = new FormData(form);
        const data = {};

        for (let pair of formData.entries()) {
            data[pair[0]] = pair[1];
        }

        post(`${url2290onlineForm}/Payment2290/AddPayment2290Admin`,
            {
                cardNumber: data.cardNumber,
                nameOnCard: data.nameOnCard,
                cardDate: data.cardDate,
                cvc: data.cvc,
                billingAddress: data.billingAddress,
                city: data.billingCity,
                zip: data.billingZip,
                stateId: data.billingState,
                form2290Id: $("#checkBtn").data('form2290Id'),
                registerUser: userId,
            },
            TOKEN_AUTH_FOR_API
        ).then(res => {
            if(res?.success){
                //     TODO: Case of successfully payment
            }else{
                toastr.error(res?.errorMessage || "Something went wrong !")
            }
            $(".loader").css({display: "none"});
        })
    }
});


const cards = {
    visa: '^4',
    amex: '^(34|37)',
    mastercard: '^5[1-5]',
    discover: '^6011',
    unionpay: '^62',
    troy: '^9792',
    diners: '^(30[0-5]|36)'
};

const cardIcons = {
    visa: `<svg width="42" height="32" viewBox="0 0 42 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1338_3983)">
            <path
                d="M39.2 32H2.8C2.05739 32 1.3452 31.6629 0.820101 31.0627C0.294999 30.4626 0 29.6487 0 28.8L0 3.2C0 2.35131 0.294999 1.53737 0.820101 0.937258C1.3452 0.337142 2.05739 0 2.8 0L39.2 0C39.9426 0 40.6548 0.337142 41.1799 0.937258C41.705 1.53737 42 2.35131 42 3.2V28.8C42 29.6487 41.705 30.4626 41.1799 31.0627C40.6548 31.6629 39.9426 32 39.2 32ZM20.8133 19.6827L20.3945 22.6827C21.4649 23.1975 22.6208 23.4391 23.7813 23.3907H23.7685C25.1285 23.4813 26.4753 23.0428 27.5893 22.1467L27.5695 22.1613C28.0243 21.7793 28.3942 21.2803 28.6491 20.7047C28.9041 20.1292 29.037 19.4931 29.0372 18.848V18.828C29.0372 17.3613 28.1785 16.144 26.4857 15.2027C26.0237 14.9479 25.5819 14.6481 25.165 14.3067L25.1918 14.328C25.0754 14.2418 24.9784 14.1254 24.9089 13.9882C24.8394 13.851 24.7992 13.697 24.7917 13.5387V13.536C24.8004 13.3709 24.8455 13.2109 24.9228 13.0711C25.0001 12.9312 25.1071 12.8159 25.2338 12.736L25.2385 12.7333C25.6301 12.4751 26.0801 12.3559 26.5312 12.3907H26.5242H26.6175L26.7073 12.3893C27.4587 12.3893 28.1715 12.5747 28.8143 12.9067L28.7817 12.892L29.0547 13.0587L29.4735 10.164C28.6265 9.78863 27.7255 9.59778 26.817 9.60133H26.7598H26.7633C25.4488 9.53556 24.1527 9.97287 23.0802 10.844L23.0988 10.8293C22.6531 11.1889 22.2893 11.6655 22.0382 12.2191C21.7871 12.7727 21.6559 13.3871 21.6557 14.0107V14.0173C21.644 15.428 22.533 16.6467 24.2993 17.644C24.766 17.8773 25.1685 18.1627 25.529 18.5053L25.5208 18.4973C25.6249 18.5973 25.7095 18.7211 25.7692 18.8608C25.8288 19.0004 25.8623 19.1527 25.8673 19.308V19.3133C25.8673 19.7387 25.6457 20.104 25.326 20.268L25.3202 20.2707C24.9702 20.4813 24.5548 20.604 24.1138 20.604H24.0602H24.0625H23.975C22.9752 20.604 22.0278 20.3507 21.1785 19.8973L21.2193 19.9173L20.8192 19.688L20.8133 19.6827ZM32.6258 21.204H36.4933C36.5556 21.5089 36.6773 22.1756 36.8585 23.204H39.6667L37.2237 9.82933H34.8903C34.5568 9.79555 34.2225 9.88563 33.9373 10.0862C33.6521 10.2868 33.4311 10.5871 33.3072 10.9427L33.3037 10.9547L28.8237 23.204H31.997L32.634 21.2053L32.6258 21.204ZM17.3728 9.82933L15.4758 23.204H18.5022L20.398 9.82933H17.3728ZM5.74233 12.5587L8.204 23.1827H11.3937L16.1478 9.82933H12.9442L9.98783 18.9547L9.6775 17.1L8.62283 10.9547C8.5663 10.6002 8.39149 10.2847 8.13529 10.0748C7.8791 9.86482 7.56155 9.77681 7.24967 9.82933L7.25667 9.828H2.37183L2.33567 10.0987C6.097 11.1907 8.568 13.5467 9.681 17.0987C9.33898 16.0837 8.81159 15.1637 8.134 14.4L8.13283 14.3987C7.46715 13.6175 6.67088 12.9972 5.79133 12.5747L5.74467 12.5547L5.74233 12.5587ZM36.0022 18.4533H33.4822C33.6525 17.9396 34.0538 16.6951 34.6862 14.72L34.7398 14.532L34.9265 13.9907C35.0035 13.7693 35.0548 13.588 35.0898 13.4493L35.3092 14.5947L36.001 18.448L36.0022 18.4533Z"
                fill="#1434CB"/>
        </g>
        <defs>
            <clipPath id="clip0_1338_3983">
                <rect width="42" height="32" fill="white"/>
            </clipPath>
        </defs>
    </svg>`,
    mastercard: `<svg width="42" height="32" viewBox="0 0 42 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.5">
            <path opacity="0.5"
                  d="M26.0015 23C24.0237 23.0003 22.0902 22.4141 20.4455 21.3155C18.8009 20.217 17.5189 18.6554 16.7618 16.8282C16.0046 15.0011 15.8063 12.9904 16.1919 11.0506C16.5774 9.11069 17.5296 7.32872 18.9279 5.92999C20.3262 4.53125 22.1079 3.57858 24.0476 3.19244C25.9874 2.8063 27.9981 3.00404 29.8255 3.76064C31.6528 4.51724 33.2148 5.79874 34.3139 7.44307C35.4129 9.08739 35.9997 11.0207 36 12.9985V13C35.9972 15.6511 34.943 18.1928 33.0686 20.0675C31.1941 21.9422 28.6525 22.9969 26.0015 23Z"
                  fill="#F79E1B"/>
            <path
                d="M16 23C14.0222 23 12.0888 22.4135 10.4443 21.3147C8.79981 20.2159 7.51809 18.6541 6.76121 16.8268C6.00433 14.9996 5.8063 12.9889 6.19215 11.0491C6.578 9.10929 7.53041 7.32746 8.92894 5.92894C10.3275 4.53041 12.1093 3.578 14.0491 3.19215C15.9889 2.8063 17.9996 3.00433 19.8268 3.76121C21.6541 4.51809 23.2159 5.79981 24.3147 7.4443C25.4135 9.08879 26 11.0222 26 13C25.9972 15.6513 24.9428 18.1933 23.068 20.068C21.1933 21.9428 18.6513 22.9972 16 23Z"
                fill="#EB001B"/>
            <path
                d="M2.43066 24.2273H3.31592V24.7229C3.63265 24.3378 4.00977 24.1453 4.44727 24.1453C4.67969 24.1453 4.88135 24.1931 5.05225 24.2888C5.22314 24.3845 5.36328 24.5292 5.47266 24.7229C5.63216 24.5292 5.8042 24.3845 5.98877 24.2888C6.17334 24.1931 6.37044 24.1453 6.58008 24.1453C6.84668 24.1453 7.07227 24.2 7.25684 24.3093C7.44141 24.4164 7.57926 24.5748 7.67041 24.7844C7.73649 24.9394 7.76953 25.19 7.76953 25.5364V27.8572H6.80908V25.7825C6.80908 25.4224 6.77604 25.19 6.70996 25.0852C6.62109 24.9485 6.48438 24.8801 6.2998 24.8801C6.16536 24.8801 6.0389 24.9211 5.92041 25.0032C5.80192 25.0852 5.71647 25.206 5.66406 25.3655C5.61165 25.5227 5.58545 25.7722 5.58545 26.114V27.8572H4.625V25.8679C4.625 25.5147 4.60791 25.2869 4.57373 25.1843C4.53955 25.0818 4.486 25.0055 4.41309 24.9553C4.34245 24.9052 4.24561 24.8801 4.12256 24.8801C3.97445 24.8801 3.84115 24.92 3.72266 24.9998C3.60417 25.0795 3.51872 25.1946 3.46631 25.345C3.41618 25.4954 3.39111 25.7449 3.39111 26.0935V27.8572H2.43066V24.2273ZM9.44775 25.3347L8.57617 25.1775C8.67415 24.8266 8.84277 24.5668 9.08203 24.3982C9.32129 24.2296 9.67676 24.1453 10.1484 24.1453C10.5768 24.1453 10.8958 24.1965 11.1055 24.2991C11.3151 24.3993 11.4621 24.5281 11.5464 24.6853C11.633 24.8403 11.6763 25.1262 11.6763 25.5432L11.666 26.6643C11.666 26.9833 11.6808 27.2192 11.7104 27.3718C11.7424 27.5222 11.8005 27.684 11.8848 27.8572H10.9346C10.9095 27.7934 10.8787 27.6988 10.8423 27.5735C10.8263 27.5165 10.8149 27.4789 10.8081 27.4607C10.644 27.6202 10.4686 27.7398 10.2817 27.8196C10.0949 27.8993 9.89551 27.9392 9.68359 27.9392C9.3099 27.9392 9.01481 27.8378 8.79834 27.635C8.58415 27.4322 8.47705 27.1759 8.47705 26.866C8.47705 26.6609 8.52604 26.4786 8.62402 26.3191C8.72201 26.1573 8.85872 26.0343 9.03418 25.95C9.21191 25.8634 9.46712 25.7882 9.7998 25.7244C10.2487 25.6401 10.5597 25.5614 10.7329 25.4885V25.3928C10.7329 25.2083 10.6873 25.0772 10.5962 24.9998C10.505 24.92 10.333 24.8801 10.0801 24.8801C9.90918 24.8801 9.77588 24.9143 9.68018 24.9827C9.58447 25.0487 9.507 25.1661 9.44775 25.3347ZM10.7329 26.114C10.6099 26.155 10.415 26.204 10.1484 26.261C9.88184 26.318 9.70752 26.3738 9.62549 26.4285C9.50016 26.5173 9.4375 26.6301 9.4375 26.7668C9.4375 26.9013 9.48763 27.0175 9.58789 27.1155C9.68815 27.2135 9.81576 27.2625 9.9707 27.2625C10.1439 27.2625 10.3091 27.2055 10.4663 27.0916C10.5825 27.005 10.6589 26.899 10.6953 26.7737C10.7204 26.6917 10.7329 26.5356 10.7329 26.3054V26.114ZM12.2881 26.8215L13.252 26.6746C13.293 26.8614 13.3761 27.0038 13.5015 27.1018C13.6268 27.1975 13.8022 27.2454 14.0278 27.2454C14.2762 27.2454 14.4631 27.1998 14.5884 27.1086C14.6727 27.0448 14.7148 26.9594 14.7148 26.8523C14.7148 26.7794 14.6921 26.719 14.6465 26.6711C14.5986 26.6256 14.4915 26.5834 14.3252 26.5447C13.5505 26.3738 13.0594 26.2177 12.8521 26.0764C12.5649 25.8805 12.4214 25.6082 12.4214 25.2595C12.4214 24.9451 12.5456 24.6807 12.7939 24.4666C13.0423 24.2524 13.4274 24.1453 13.9492 24.1453C14.446 24.1453 14.8151 24.2262 15.0566 24.3879C15.2982 24.5497 15.4645 24.789 15.5557 25.1057L14.6499 25.2732C14.6112 25.1319 14.5371 25.0237 14.4277 24.9485C14.3206 24.8733 14.1668 24.8357 13.9663 24.8357C13.7134 24.8357 13.5322 24.871 13.4229 24.9417C13.3499 24.9918 13.3135 25.0567 13.3135 25.1365C13.3135 25.2048 13.3454 25.2629 13.4092 25.3108C13.4958 25.3746 13.7943 25.4646 14.3047 25.5808C14.8174 25.697 15.1751 25.8394 15.3779 26.0081C15.5785 26.179 15.6787 26.4171 15.6787 26.7224C15.6787 27.0551 15.5397 27.3411 15.2617 27.5803C14.9837 27.8196 14.5724 27.9392 14.0278 27.9392C13.5334 27.9392 13.1414 27.8389 12.8521 27.6384C12.5649 27.4379 12.377 27.1656 12.2881 26.8215ZM18.1875 24.2273V24.9929H17.5312V26.4558C17.5312 26.752 17.5369 26.9252 17.5483 26.9753C17.562 27.0232 17.5905 27.0631 17.6338 27.095C17.6794 27.1269 17.734 27.1428 17.7979 27.1428C17.8867 27.1428 18.0155 27.1121 18.1841 27.0505L18.2661 27.7957C18.0428 27.8914 17.7899 27.9392 17.5073 27.9392C17.3341 27.9392 17.1781 27.9107 17.0391 27.8538C16.9001 27.7945 16.7975 27.7193 16.7314 27.6282C16.6676 27.5347 16.6232 27.4094 16.5981 27.2522C16.5776 27.1405 16.5674 26.915 16.5674 26.5754V24.9929H16.1265V24.2273H16.5674V23.5061L17.5312 22.9456V24.2273H18.1875ZM20.9561 26.7019L21.9131 26.8625C21.79 27.2135 21.5952 27.4812 21.3286 27.6658C21.0643 27.8481 20.7327 27.9392 20.334 27.9392C19.7028 27.9392 19.2357 27.733 18.9326 27.3206C18.6934 26.9902 18.5737 26.5732 18.5737 26.0696C18.5737 25.468 18.731 24.9975 19.0454 24.658C19.3599 24.3162 19.7575 24.1453 20.2383 24.1453C20.7783 24.1453 21.2044 24.3241 21.5166 24.6819C21.8288 25.0374 21.978 25.5831 21.9644 26.3191H19.5581C19.5649 26.6039 19.6424 26.8261 19.7905 26.9856C19.9386 27.1428 20.1232 27.2214 20.3442 27.2214C20.4946 27.2214 20.6211 27.1804 20.7236 27.0984C20.8262 27.0164 20.9036 26.8842 20.9561 26.7019ZM21.0107 25.7312C21.0039 25.4532 20.9321 25.2424 20.7954 25.0989C20.6587 24.953 20.4924 24.8801 20.2964 24.8801C20.0868 24.8801 19.9136 24.9565 19.7769 25.1091C19.6401 25.2618 19.5729 25.4692 19.5752 25.7312H21.0107ZM23.6699 27.8572H22.7095V24.2273H23.6016V24.7434C23.7542 24.4996 23.891 24.3389 24.0117 24.2615C24.1348 24.184 24.2738 24.1453 24.4287 24.1453C24.6475 24.1453 24.8582 24.2056 25.061 24.3264L24.7637 25.1638C24.6019 25.059 24.4515 25.0066 24.3125 25.0066C24.1781 25.0066 24.0641 25.0442 23.9707 25.1194C23.8773 25.1923 23.8032 25.3256 23.7485 25.5193C23.6961 25.713 23.6699 26.1186 23.6699 26.7361V27.8572ZM28.6431 25.3005L27.6963 25.4714C27.6644 25.2823 27.5915 25.1399 27.4775 25.0442C27.3659 24.9485 27.2201 24.9006 27.04 24.9006C26.8008 24.9006 26.6094 24.9838 26.4658 25.1501C26.3245 25.3142 26.2539 25.5899 26.2539 25.9773C26.2539 26.408 26.3257 26.7122 26.4692 26.8899C26.6151 27.0676 26.8099 27.1565 27.0537 27.1565C27.236 27.1565 27.3853 27.1052 27.5015 27.0027C27.6177 26.8979 27.6997 26.719 27.7476 26.4661L28.6909 26.6267C28.5929 27.0597 28.4049 27.3866 28.127 27.6077C27.849 27.8287 27.4764 27.9392 27.0093 27.9392C26.4784 27.9392 26.0545 27.7717 25.7378 27.4368C25.4233 27.1018 25.2661 26.6381 25.2661 26.0457C25.2661 25.4464 25.4245 24.9804 25.7412 24.6477C26.0579 24.3127 26.4863 24.1453 27.0264 24.1453C27.4684 24.1453 27.8193 24.241 28.0791 24.4324C28.3411 24.6215 28.5291 24.9109 28.6431 25.3005ZM30.0923 25.3347L29.2207 25.1775C29.3187 24.8266 29.4873 24.5668 29.7266 24.3982C29.9658 24.2296 30.3213 24.1453 30.793 24.1453C31.2214 24.1453 31.5404 24.1965 31.75 24.2991C31.9596 24.3993 32.1066 24.5281 32.1909 24.6853C32.2775 24.8403 32.3208 25.1262 32.3208 25.5432L32.3105 26.6643C32.3105 26.9833 32.3254 27.2192 32.355 27.3718C32.3869 27.5222 32.445 27.684 32.5293 27.8572H31.5791C31.554 27.7934 31.5233 27.6988 31.4868 27.5735C31.4709 27.5165 31.4595 27.4789 31.4526 27.4607C31.2886 27.6202 31.1131 27.7398 30.9263 27.8196C30.7394 27.8993 30.54 27.9392 30.3281 27.9392C29.9544 27.9392 29.6593 27.8378 29.4429 27.635C29.2287 27.4322 29.1216 27.1759 29.1216 26.866C29.1216 26.6609 29.1706 26.4786 29.2686 26.3191C29.3665 26.1573 29.5033 26.0343 29.6787 25.95C29.8564 25.8634 30.1117 25.7882 30.4443 25.7244C30.8932 25.6401 31.2043 25.5614 31.3774 25.4885V25.3928C31.3774 25.2083 31.3319 25.0772 31.2407 24.9998C31.1496 24.92 30.9775 24.8801 30.7246 24.8801C30.5537 24.8801 30.4204 24.9143 30.3247 24.9827C30.229 25.0487 30.1515 25.1661 30.0923 25.3347ZM31.3774 26.114C31.2544 26.155 31.0596 26.204 30.793 26.261C30.5264 26.318 30.3521 26.3738 30.27 26.4285C30.1447 26.5173 30.082 26.6301 30.082 26.7668C30.082 26.9013 30.1322 27.0175 30.2324 27.1155C30.3327 27.2135 30.4603 27.2625 30.6152 27.2625C30.7884 27.2625 30.9536 27.2055 31.1108 27.0916C31.2271 27.005 31.3034 26.899 31.3398 26.7737C31.3649 26.6917 31.3774 26.5356 31.3774 26.3054V26.114ZM34.1904 27.8572H33.23V24.2273H34.1221V24.7434C34.2747 24.4996 34.4115 24.3389 34.5322 24.2615C34.6553 24.184 34.7943 24.1453 34.9492 24.1453C35.168 24.1453 35.3787 24.2056 35.5815 24.3264L35.2842 25.1638C35.1224 25.059 34.972 25.0066 34.833 25.0066C34.6986 25.0066 34.5846 25.0442 34.4912 25.1194C34.3978 25.1923 34.3237 25.3256 34.269 25.5193C34.2166 25.713 34.1904 26.1186 34.1904 26.7361V27.8572ZM39.3276 27.8572H38.4355V27.324C38.2874 27.5313 38.112 27.6863 37.9092 27.7888C37.7087 27.8891 37.5059 27.9392 37.3008 27.9392C36.8838 27.9392 36.526 27.7717 36.2275 27.4368C35.9313 27.0995 35.7832 26.6301 35.7832 26.0286C35.7832 25.4133 35.9279 24.9462 36.2173 24.6272C36.5067 24.3059 36.8724 24.1453 37.3145 24.1453C37.7201 24.1453 38.071 24.3139 38.3672 24.6511V22.8464H39.3276V27.8572ZM36.7642 25.9636C36.7642 26.351 36.8177 26.6313 36.9248 26.8044C37.0798 27.0551 37.2962 27.1804 37.5742 27.1804C37.7952 27.1804 37.9832 27.087 38.1382 26.9001C38.2931 26.711 38.3706 26.4296 38.3706 26.0559C38.3706 25.6389 38.2954 25.3393 38.145 25.157C37.9946 24.9724 37.8021 24.8801 37.5674 24.8801C37.3395 24.8801 37.1481 24.9713 36.9932 25.1536C36.8405 25.3336 36.7642 25.6036 36.7642 25.9636Z"
                fill="black"/>
        </g>
    </svg>`,
    amex: `<svg width="42" height="32" viewBox="0 0 42 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.5" clip-path="url(#clip0_1338_3989)">
            <path
                d="M39.2 32H2.8C2.05739 32 1.3452 31.6629 0.820101 31.0628C0.294999 30.4626 0 29.6487 0 28.8L0 15.3387H2.01717L2.47217 14.08H3.49067L3.9445 15.3334H7.9135V14.38L8.26817 15.34H10.3285L10.6832 14.364V15.3374H20.545V13.2787H20.7317C20.8647 13.284 20.9032 13.2974 20.9032 13.5507V15.34H26.005V14.8614C26.5265 15.164 27.1413 15.3414 27.7935 15.3414L27.9043 15.34H27.8985H30.0452L30.5048 14.0867H31.5233L31.9725 15.34H36.1095V14.148L36.7348 15.34H40.0435V7.46802H36.7687V8.39735L36.3102 7.46802H32.9432V8.39735L32.522 7.46802H27.9755C27.2867 7.42824 26.6003 7.59025 25.9817 7.93869L26.0062 7.92669V7.46802H22.8702V7.92669C22.4906 7.58476 22.0112 7.42119 21.5297 7.46935H21.5367H10.0765L9.30767 9.50269L8.51783 7.46935H4.90817V8.39869L4.51033 7.46935H1.43033L0.0035 11.2027V3.20269C0.0035 2.35399 0.298499 1.54006 0.823601 0.939944C1.3487 0.339827 2.06089 0.00268555 2.8035 0.00268555H39.2035C39.9461 0.00268555 40.6583 0.339827 41.1834 0.939944C41.7085 1.54006 42.0035 2.35399 42.0035 3.20269V17.176H39.8183C39.7833 17.1734 39.7413 17.1734 39.7005 17.1734C39.1942 17.1734 38.724 17.3467 38.332 17.644L38.3413 17.6374V17.176H35.1097C34.6048 17.1441 34.1053 17.3081 33.6922 17.6414L33.6992 17.636V17.1747H27.9288V17.636C27.4565 17.3316 26.923 17.1726 26.3807 17.1747H26.3352H26.3375H22.5307V17.636C22.0333 17.2719 21.4431 17.1099 20.8553 17.176L20.8658 17.1747H16.6063L15.631 18.38L14.7187 17.1747H8.35567V25.052H14.5997L15.6042 23.828L16.5503 25.052H20.3992V23.208H20.9358C21.4519 23.2311 21.9665 23.1326 22.4478 22.9187L22.4222 22.9294V25.0547H25.5955V23.0027H25.7483C25.942 23.0027 25.9618 23.0107 25.9618 23.2347V25.056H35.6055L35.7233 25.0587C36.2763 25.0587 36.792 24.8694 37.2213 24.5454L37.2108 24.552V25.056H40.2698L40.4157 25.0587C40.9885 25.0587 41.5333 24.924 42.028 24.68L42.0012 24.692V28.8014C42.0012 29.65 41.7062 30.464 41.1811 31.0641C40.656 31.6642 39.9438 32.0014 39.2012 32.0014L39.2 32ZM24.6225 23.948H23.4348V18.3014H26.1602C26.6524 18.2492 27.148 18.3438 27.5987 18.576L27.58 18.568C27.9452 18.7974 28.189 19.2347 28.189 19.736L28.1867 19.8254V19.8214L28.1878 19.872C28.1878 20.52 27.846 21.0774 27.356 21.32L27.3467 21.324C27.5812 21.42 27.7772 21.584 27.923 21.796L27.9253 21.7987C28.09 22.1103 28.159 22.4758 28.1213 22.8374L28.1225 22.8294V23.9467H26.9372V23.24C26.9933 22.8553 26.9257 22.4603 26.747 22.128L26.7505 22.1347C26.6273 22.0279 26.4865 21.9507 26.3365 21.9078C26.1865 21.865 26.0305 21.8573 25.8778 21.8854L25.8848 21.884H24.6225V23.9467V23.948ZM24.6225 19.468V20.736H26.0575C26.2601 20.7574 26.4641 20.716 26.6478 20.616L26.6408 20.62C26.7159 20.5646 26.7777 20.4886 26.8204 20.399C26.8632 20.3093 26.8857 20.2088 26.8858 20.1067L26.8847 20.076C26.8905 19.9741 26.8708 19.8737 26.8281 19.7841C26.7853 19.6944 26.7212 19.6204 26.6432 19.5707L26.6408 19.5694C26.4638 19.4789 26.2693 19.4421 26.0762 19.4627H26.0808L24.6225 19.468ZM14.0933 23.9467H9.4185V18.3014H14.1668L15.6193 20.152L17.1208 18.3014H20.8927C22.232 18.3014 22.883 18.9107 22.883 20.1614C22.883 21.4347 22.2098 22.0534 20.8297 22.0534H19.3538V23.9454H17.059L15.6053 22.08L14.0945 23.9467H14.0933ZM18.1778 18.9067L16.3648 21.1334L18.1778 23.432V18.9067ZM10.5957 21.6467V22.7694H13.4983L14.84 21.1134L13.5497 19.468H10.5945V20.4947H13.1868V21.6454L10.5957 21.6467ZM19.3538 19.4694V20.9067H20.8787C21.3453 20.9067 21.6137 20.6347 21.6137 20.16C21.6137 19.7067 21.364 19.468 20.8915 19.468L19.3538 19.4694ZM40.3982 23.9494H38.1185V22.736H40.3888C40.5587 22.7628 40.731 22.712 40.8683 22.5947L40.8672 22.596C40.911 22.5495 40.946 22.4932 40.9698 22.4306C40.9937 22.368 41.006 22.3003 41.006 22.232V22.2107C41.0061 22.1432 40.9933 22.0765 40.9685 22.0152C40.9437 21.954 40.9075 21.8997 40.8625 21.856C40.7418 21.7563 40.5928 21.7116 40.4448 21.7307H40.4472L40.229 21.7227C39.1627 21.6907 37.9552 21.6534 37.9552 19.9827C37.9552 19.1694 38.4008 18.3014 39.648 18.3014H42.0012V19.504H39.8487C39.6824 19.4828 39.5145 19.521 39.368 19.6134L39.3727 19.6107C39.3151 19.654 39.2687 19.7143 39.2386 19.7851C39.2084 19.856 39.1955 19.9348 39.2012 20.0134V20.012V20.0267C39.2012 20.1165 39.226 20.2041 39.2721 20.2769C39.3181 20.3496 39.3832 20.4039 39.4578 20.432L39.4602 20.4334C39.6081 20.4855 39.7629 20.5071 39.9175 20.4974H39.914L40.5545 20.516C41.0373 20.461 41.5197 20.6252 41.8973 20.9734L41.8938 20.9707C41.9288 21.0027 41.9592 21.0374 41.986 21.076L41.9872 21.0774L42.0012 23.2267C41.805 23.4887 41.5554 23.6915 41.2744 23.8173C40.9934 23.9431 40.6897 23.988 40.39 23.948L40.3982 23.9494ZM35.791 23.9494H33.4903V22.736H35.7793C35.9506 22.7616 36.124 22.711 36.2635 22.5947L36.2612 22.596C36.3047 22.5494 36.3394 22.493 36.3631 22.4304C36.3868 22.3678 36.399 22.3002 36.3988 22.232V22.2187C36.3988 22.1501 36.386 22.0822 36.3612 22.0197C36.3365 21.9572 36.3004 21.9014 36.2553 21.856C36.1324 21.7562 35.9817 21.7116 35.8318 21.7307H35.8342L35.6172 21.7227C34.5543 21.6907 33.348 21.6534 33.348 19.9827C33.348 19.1694 33.7913 18.3014 35.0362 18.3014H37.4022V19.504H35.2368C35.0717 19.483 34.9049 19.5212 34.7597 19.6134L34.7643 19.6107C34.703 19.6589 34.6543 19.7251 34.6232 19.8024C34.5921 19.8796 34.5799 19.965 34.5878 20.0496C34.5957 20.1341 34.6234 20.2146 34.668 20.2827C34.7127 20.3507 34.7725 20.4037 34.8413 20.436L34.8437 20.4374C34.9935 20.4899 35.1503 20.5115 35.3068 20.5014H35.3033L35.9392 20.52C36.4245 20.4666 36.909 20.6311 37.2902 20.9787L37.2867 20.9747C37.4149 21.1362 37.5124 21.3264 37.573 21.5331C37.6337 21.7399 37.6561 21.9588 37.639 22.176V22.1694C37.6425 23.3467 37.0183 23.9467 35.7875 23.9467L35.791 23.9494ZM32.7833 23.9494H28.84V18.3H32.7798V19.4667H30.0183V20.4934H32.7157V21.644H30.0183V22.7667L32.7833 22.772V23.9454V23.9494ZM35.0817 14.2347H32.6772L32.2175 12.976H29.7652L29.3195 14.2347H27.9382C27.3178 14.2721 26.707 14.0487 26.2208 13.6067L26.2267 13.6107C25.9957 13.3194 25.8204 12.9762 25.7119 12.6032C25.6035 12.2302 25.5642 11.8354 25.5967 11.444L25.5955 11.4547C25.5655 11.0561 25.6066 10.6548 25.7165 10.2749C25.8265 9.89515 26.0028 9.54485 26.2348 9.24535L26.2325 9.24802C26.4775 9.0032 26.764 8.81862 27.074 8.70576C27.3841 8.5929 27.7112 8.55419 28.035 8.59202L28.0257 8.59069H29.169V9.79469H28.049C27.8851 9.77056 27.7186 9.78804 27.5613 9.84589C27.404 9.90374 27.2598 10.0005 27.139 10.1294L27.1402 10.128C26.8907 10.4931 26.7696 10.9515 26.8007 11.4134V11.4067C26.7635 11.8812 26.8802 12.3547 27.1285 12.7374L27.125 12.732C27.3569 12.9486 27.6538 13.053 27.9522 13.0227H27.9475H28.4772L30.1467 8.58269H31.92L33.9185 13.916V8.58269H35.7163L37.7907 12.5134V8.58269H39.004V14.2254H37.3193L35.0793 9.98802V14.2254L35.0817 14.2347ZM30.9995 9.54402L30.1863 11.7947H31.8162L30.9995 9.54402ZM19.5673 14.232H18.3867V8.58669H21.1027C21.5985 8.52789 22.0989 8.62421 22.5505 8.86535L22.533 8.85735C22.7146 8.97211 22.866 9.14034 22.9714 9.34456C23.0769 9.54879 23.1325 9.78155 23.1327 10.0187L23.1303 10.112V10.108V10.1494C23.1304 10.4573 23.0528 10.7587 22.9067 11.0175C22.7606 11.2762 22.5522 11.4813 22.3067 11.608L22.2973 11.612C22.5318 11.7134 22.729 11.876 22.8795 12.084L22.8818 12.0867C23.0483 12.3995 23.117 12.7675 23.0767 13.1307L23.0778 13.1227V14.2307H21.8867L21.882 13.5187V13.412C21.9244 13.0639 21.857 12.7099 21.6918 12.4134L21.6953 12.42C21.5718 12.3163 21.4314 12.2415 21.2825 12.2001C21.1335 12.1587 20.9788 12.1514 20.8273 12.1787L20.8343 12.1774H19.5685V14.2307L19.5673 14.232ZM19.5673 9.76135V11.0147H21C21.2024 11.0398 21.4068 10.9981 21.5892 10.8947L21.5833 10.8974C21.6581 10.8454 21.7199 10.7724 21.7628 10.6853C21.8057 10.5982 21.8282 10.5 21.8283 10.4L21.8272 10.3627C21.8331 10.2614 21.813 10.1616 21.7692 10.0732C21.7255 9.98487 21.66 9.91306 21.581 9.86669L21.5787 9.86535C21.4011 9.7783 21.2078 9.7417 21.0152 9.75869H21.0187L19.5673 9.76135ZM7.06533 14.232H4.66667L4.21283 12.9734H1.7535L1.29617 14.232H0.0128333L2.128 8.58669H3.8815L5.88933 13.9294V8.58669H7.8155L9.36017 12.4147L10.78 8.58669H12.7458V14.2294H11.5325L11.5302 9.81335L9.81867 14.2307H8.78267L7.0665 9.80669V14.2307L7.06533 14.232ZM2.97733 9.54402L2.1735 11.7947H3.78583L2.97733 9.54402ZM25.0133 14.2307H23.8093V8.58669H25.0145V14.2294L25.0133 14.2307ZM17.563 14.2307H13.6267V8.58669H17.57V9.76002H14.8073V10.7774H17.5035V11.936H14.805V13.064H17.5677V14.2294L17.563 14.2307Z"
                fill="#016FD0"/>
        </g>
        <defs>
            <clipPath id="clip0_1338_3989">
                <rect width="42" height="32" fill="white"/>
            </clipPath>
        </defs>
    </svg>`,
    discover: `<svg width="42" height="32" viewBox="0 0 42 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.5" clip-path="url(#clip0_1338_3991)">
            <path
                d="M37.947 11.72C37.947 11.1556 37.5454 10.8561 36.8091 10.8561H36.4521V12.6342H36.7946C37.5454 12.6342 37.947 12.3205 37.947 11.72ZM38.5009 0H3.50044C2.57217 0.000340747 1.68202 0.361703 1.02564 1.00466C0.369255 1.64762 0.000347861 2.51956 0 3.42885V28.5712C0.000347861 29.4804 0.369255 30.3524 1.02564 30.9953C1.68202 31.6383 2.57217 31.9997 3.50044 32H38.5009C39.4291 31.9997 40.3193 31.6383 40.9757 30.9953C41.6321 30.3524 42.001 29.4804 42.0013 28.5712V3.42885C42.001 2.51956 41.6321 1.64762 40.9757 1.00466C40.3193 0.361703 39.4291 0.000340747 38.5009 0ZM35.2852 9.92013C36.9338 9.92013 39.1427 9.627 39.1427 11.6635C39.1427 12.5634 38.661 13.142 37.779 13.3207L39.6598 15.7776H38.2305L36.6122 13.4351H36.4521V15.7776H35.2852V9.92013ZM31.2099 9.92784H34.5135V10.9281H32.3767V12.2279H34.44V13.214H32.3767V14.7992H34.5135V15.7853H31.2099V9.92784ZM26.2001 9.92784L27.7974 13.871L29.4157 9.92784H30.6915L28.1032 15.9421H27.4759L24.9244 9.92784H26.2001ZM22.1235 9.71314C22.5507 9.71297 22.9737 9.79526 23.3683 9.9553C23.763 10.1153 24.1216 10.35 24.4237 10.6459C24.7257 10.9417 24.9653 11.293 25.1287 11.6796C25.292 12.0662 25.376 12.4806 25.3759 12.899C25.376 13.3174 25.292 13.7318 25.1287 14.1184C24.9653 14.505 24.7257 14.8562 24.4237 15.1521C24.1216 15.448 23.763 15.6826 23.3683 15.8427C22.9737 16.0027 22.5507 16.085 22.1235 16.0849C21.6963 16.085 21.2733 16.0027 20.8787 15.8427C20.484 15.6826 20.1254 15.448 19.8233 15.1521C19.5213 14.8562 19.2817 14.505 19.1183 14.1184C18.955 13.7318 18.871 13.3174 18.8711 12.899C18.871 12.4806 18.955 12.0662 19.1183 11.6796C19.2817 11.293 19.5213 10.9417 19.8233 10.6459C20.1254 10.35 20.484 10.1153 20.8787 9.9553C21.2733 9.79526 21.6963 9.71297 22.1235 9.71314ZM18.5299 10.149V11.5066C17.0638 10.0706 15.1174 11.1711 15.1174 12.8643C15.1174 14.6501 17.1229 15.6143 18.5299 14.2361V15.5937C16.3643 16.6158 13.9138 15.1862 13.9138 12.8656C13.9138 10.6375 16.3275 9.0806 18.5299 10.1515V10.149ZM11.4424 14.8841C12.2732 14.8841 13.0764 13.7912 11.2022 13.142C10.1089 12.7486 9.72956 12.3282 9.72956 11.5208C9.72956 9.86356 11.9608 9.2773 13.3534 10.5L12.7404 11.2714C11.9818 10.4421 10.9253 10.8291 10.9253 11.4501C10.9253 11.7638 11.1221 11.9425 11.8217 12.1855C13.1486 12.6573 13.5424 13.0777 13.5424 14.0137C13.5424 16.1209 10.7126 16.6853 9.41587 14.8211L10.1666 14.1139C10.437 14.6205 10.8885 14.8841 11.4424 14.8841ZM4.04119 15.784H2.33494V9.92656H4.04119C5.94431 9.92656 7.25681 11.1402 7.25681 12.8617C7.25681 14.1834 6.29475 15.7827 4.04119 15.7827V15.784ZM8.96306 15.784H7.79625V9.92656H8.96306V15.784ZM39.6677 28.6406C39.6656 28.924 39.5498 29.1952 39.3452 29.3956C39.1406 29.596 38.8637 29.7095 38.5744 29.7115H9.3345C23.1591 27.1685 37.2396 19.7695 39.6677 18.2833V28.6406ZM5.40487 11.3986C5.02556 11.0489 4.55831 10.9268 3.80756 10.9268H3.50175V14.7979H3.80756C4.55831 14.7979 5.04656 14.6552 5.40487 14.3415C5.82094 13.9699 6.05325 13.4274 6.05325 12.863C6.05325 12.2986 5.81962 11.756 5.40487 11.3986Z"
                fill="#F16821"/>
        </g>
        <defs>
            <clipPath id="clip0_1338_3991">
                <rect width="42" height="32" fill="white"/>
            </clipPath>
        </defs>
    </svg>`
}


const cardType = (e) => {
    const number = e.target.value;
    let re;
    for (const [card, pattern] of Object.entries(cards)) {
        re = new RegExp(pattern);
        if (re.test(number)) {
            $(".creditCardIcon").html(cardIcons[card] || "");

            return;
        }
    }

    $(".creditCardIcon").html("");
};

$("#cardNumber").on("input", cardType);

$("input[name=sameAddress]").change(e => {
    const same = e.target.value === "1";

    $("#billingAddress").val(same ? $("#address").val() : "");
    $("#billingCity").val(same ? $("#city").val() : "");
    $("#billingZip").val(same ? $("#zip").val() : "");
    $(`#billingState option[value='${same ? $("#state").val() : ""}']`).prop('selected', true);
});


















